
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>4. (TP) Utilisation d’une régression linéaire. (1h) &#8212; Méthodes expérimentales - Correction</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="canonical" href="https://pcsi3physiquestan.github.io/tp1_methodes_correction/notebook/exo_comparaison.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="3. (TP) Application au tracé graphique (1h)" href="exo_graphique.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Méthodes expérimentales - Correction</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../tp1_methodes_correction.html">
                    Méthodes expérimentales
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Mesure unique
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="exo_protocole.html">
   1. (Travail) Etude préliminaire
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="exo_estimation.html">
   2. (TP) Application à l’étude des ultrasons. (1h)
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Mesures multiples
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="exo_graphique.html">
   3. (TP) Application au tracé graphique (1h)
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   4. (TP) Utilisation d’une régression linéaire. (1h)
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            <a href="https://www.cedriclacpatia.fr">Site de la classe</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/executablebooks/jupyter-book/master?urlpath=tree/notebook/exo_comparaison.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/notebook/exo_comparaison.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#possibilite-d-un-modele-lineaire">
   4.1. Possibilité d’un modèle linéaire
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ajustement-lineaire">
   4.2. Ajustement linéaire
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#estimation-de-c">
     4.2.1. Estimation de c
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#incertitude-sur-c">
     4.2.2. Incertitude sur c
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#verifier-la-compatibilite-du-modele">
   4.3. Vérifier la compatibilité du modèle
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>(TP) Utilisation d’une régression linéaire. (1h)</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#possibilite-d-un-modele-lineaire">
   4.1. Possibilité d’un modèle linéaire
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ajustement-lineaire">
   4.2. Ajustement linéaire
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#estimation-de-c">
     4.2.1. Estimation de c
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#incertitude-sur-c">
     4.2.2. Incertitude sur c
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#verifier-la-compatibilite-du-modele">
   4.3. Vérifier la compatibilité du modèle
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <p>Vous allez maintenant mettre en oeuvre l’utilisation de l’écart normalisé et de la régression linéaire pour comparer les valeurs expérimentales avec la valeur théorique.</p>
<div class="tex2jax_ignore mathjax_ignore section" id="tp-utilisation-d-une-regression-lineaire-1h">
<h1><span class="section-number">4. </span>(TP) Utilisation d’une régression linéaire. (1h)<a class="headerlink" href="#tp-utilisation-d-une-regression-lineaire-1h" title="Permalink to this headline">#</a></h1>
<p>Vous allez utiliser les cellules suivantes pour réaliser une régression linéaire à partir de la relation <span class="math notranslate nohighlight">\(d = c \Delta t\)</span>. Vous devrez :</p>
<ul class="simple">
<li><p>Vérifier la compatibilité avec le modèle linéaire par régression linéaire et tracé graphique (pensez aux écarts normalisés)</p></li>
<li><p>Estimer ainsi la célérité et son incertitude au moyen d’une simulation de Monte-Carlo sur la régression linéaire.</p></li>
<li><p>Comparer la valeur estimée aux attentes.</p></li>
</ul>
<p>Pensez à regarder aussi <a class="reference external" href="https://pcsi3physiquestan.github.io/tp_incertitude/notebook/exemple.html">l’exemple complet</a> pour comprendre.</p>
<div class="section" id="possibilite-d-un-modele-lineaire">
<h2><span class="section-number">4.1. </span>Possibilité d’un modèle linéaire<a class="headerlink" href="#possibilite-d-un-modele-lineaire" title="Permalink to this headline">#</a></h2>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">------- MODULES UTILES -----------</span>
<span class="sd">Les bibliothèques utiles sont déjà importées.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy.random</span> <span class="k">as</span> <span class="nn">rd</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">------- DONNEES EXPERIMENTALES -----------</span>
<span class="sd">Pensez à changer les valeurs des données expérimentales. Les suivantes sont fictives</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="n">d</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="mi">37</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">55</span><span class="p">])</span>  <span class="c1"># Liste des distances E-R (en cm - évitez les nombres trop petits)</span>
<span class="n">ud</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.172</span><span class="p">,</span> <span class="mf">0.82</span><span class="p">,</span> <span class="mf">0.082</span><span class="p">,</span> <span class="mf">0.14</span><span class="p">,</span> <span class="mf">0.204</span><span class="p">,</span> <span class="mf">0.17</span><span class="p">,</span> <span class="mf">0.082</span><span class="p">,</span> <span class="mf">0.16</span><span class="p">,</span> <span class="mf">0.12</span><span class="p">,</span> <span class="mf">0.81</span><span class="p">])</span>  <span class="c1"># Liste des incertitudes sur d</span>
<span class="n">dt</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.27</span><span class="p">,</span> <span class="mf">0.45</span><span class="p">,</span> <span class="mf">0.47</span><span class="p">,</span> <span class="mf">0.548</span><span class="p">,</span> <span class="mf">0.705</span><span class="p">,</span> <span class="mf">0.74</span><span class="p">,</span> <span class="mf">1.03</span><span class="p">,</span> <span class="mf">1.098</span><span class="p">,</span> <span class="mf">1.14</span><span class="p">,</span> <span class="mf">1.584</span><span class="p">])</span>  <span class="c1"># Liste des temps de vol (en ms)</span>
<span class="n">udt</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.0245</span><span class="p">,</span> <span class="mf">0.039</span><span class="p">,</span> <span class="mf">0.057</span><span class="p">,</span> <span class="mf">0.028</span><span class="p">,</span> <span class="mf">0.0506</span><span class="p">,</span> <span class="mf">0.037</span><span class="p">,</span> <span class="mf">0.041</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.027</span><span class="p">,</span> <span class="mf">0.031</span><span class="p">])</span>  <span class="c1"># Liste des incertitudes sur Delta t</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">------- LOI COMPATIBLE A L&#39;OEIL -----------</span>
<span class="sd">Le tracé a déjà été réalisé précédemment. On donne cette fois le code</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">f</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">f</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;Etude de la célérité du son&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Distance cm)&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Temps de vole (ms)&quot;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">errorbar</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">xerr</span><span class="o">=</span><span class="n">ud</span><span class="p">,</span> <span class="n">yerr</span><span class="o">=</span><span class="n">udt</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Données expérimentales&quot;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">&quot;+&quot;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/exo_comparaison_2_0.png" src="../_images/exo_comparaison_2_0.png" />
</div>
</div>
<p><em>Vérifiez que l’hypothèse d’une loi linéaire est plausible.</em></p>
</div>
<div class="section" id="ajustement-lineaire">
<h2><span class="section-number">4.2. </span>Ajustement linéaire<a class="headerlink" href="#ajustement-lineaire" title="Permalink to this headline">#</a></h2>
<div class="section" id="estimation-de-c">
<h3><span class="section-number">4.2.1. </span>Estimation de c<a class="headerlink" href="#estimation-de-c" title="Permalink to this headline">#</a></h3>
<p>On réalise un ajustement linéaire simple pour obtenir la pente et donc une estimation de c. Comme <span class="math notranslate nohighlight">\(\Delta t\)</span> est plus incertain que <span class="math notranslate nohighlight">\(d\)</span>, on choisi <span class="math notranslate nohighlight">\(\Delta t\)</span> comme ordonnée. On calcule donc <span class="math notranslate nohighlight">\(1/c\)</span> qu’on inverse ensuite.</p>
<div class="cell tag_hide-output tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">par_m</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">polyfit</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>  <span class="c1"># Régression linéaire</span>
<span class="n">c_m</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">par_m</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># La célérité est l&#39;inverse de la pente</span>
<span class="n">ordo_m</span> <span class="o">=</span> <span class="n">par_m</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>  <span class="c1"># On stocke aussi l&#39;ordonnée à l&#39;origine pour test ultérieur.</span>

<span class="nb">print</span><span class="p">(</span><span class="n">c_m</span> <span class="o">*</span> <span class="mi">10</span> <span class="p">)</span>  <span class="c1"># Passage en m/s</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>342.40394925850245
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="incertitude-sur-c">
<h3><span class="section-number">4.2.2. </span>Incertitude sur c<a class="headerlink" href="#incertitude-sur-c" title="Permalink to this headline">#</a></h3>
<p>On ne peut utiliser la vectorialisation, donc on va utiliser la méthode 2 : on crée les N échantillons simulées d’un coup mais on réalise l’ajustement linéaire puis la détermination de <span class="math notranslate nohighlight">\(c\)</span> dans une boucle, on stocke les valeurs et on calcule à la fin l’incertitude.</p>
<p><em>Petite nouveauté : On utilise une syntaxe pour <code class="docutils literal notranslate"><span class="pre">numpy.random.uniform</span></code> qui permet de créer d’un seul coup les aleurs simulées pour TOUS les échantillons et de le stocker dans un tableau de taille (N, k) où k est le nombre de mesures:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="nb">list</span><span class="o">/</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span><span class="nb">list</span><span class="o">/</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">size</span> <span class="p">:</span><span class="nb">tuple</span><span class="p">)</span>
</pre></div>
</div>
<p>avec:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">a</span></code> et les <code class="docutils literal notranslate"><span class="pre">b</span></code> deux listes, ici <code class="docutils literal notranslate"><span class="pre">-ud</span></code> et <code class="docutils literal notranslate"><span class="pre">ud</span></code> (ou <code class="docutils literal notranslate"><span class="pre">-udt</span></code> et <code class="docutils literal notranslate"><span class="pre">udt</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">size</span></code> est un tuple donnant la taille du tableau à remplir (ici <code class="docutils literal notranslate"><span class="pre">(N,</span> <span class="pre">k)</span></code> avec <code class="docutils literal notranslate"><span class="pre">k</span> <span class="pre">=</span> <span class="pre">len(d)</span></code> ou <code class="docutils literal notranslate"><span class="pre">len(dt)</span></code>)
La ligne <code class="docutils literal notranslate"><span class="pre">j</span></code>du tableau (donc un jeu de valeurs simulées) s’obtiendra par <code class="docutils literal notranslate"><span class="pre">tableau[j]</span></code>.</p></li>
</ul>
<div class="cell tag_remove-output tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">------- AJUSTEMENT LINEAIRE -----------</span>
<span class="sd">Vous devez réaliser un ajustement linéaire et en déduire une valeur des paramètres</span>
<span class="sd">(pente et ordonnées à l&#39;origine) AVEC LEUR INCERTITUDE par méthode de Monte-Carlo.</span>
<span class="sd">La majeure partie du code est donnée.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">N</span> <span class="o">=</span> <span class="mi">10000</span>
<span class="n">n_bin</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>  <span class="c1"># Nombre de binômes</span>

<span class="sd">&quot;&quot;&quot; SIMULATION DES ECHANTILLONS</span>
<span class="sd">On crée directement des tableaux de N*k échantillons simulés pour d et dt</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">k</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="n">d_sim</span> <span class="o">=</span> <span class="n">d</span> <span class="o">+</span> <span class="n">rd</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="n">ud</span><span class="p">,</span> <span class="n">ud</span><span class="p">,</span> <span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">k</span><span class="p">))</span>
<span class="n">dt_sim</span> <span class="o">=</span> <span class="n">dt</span> <span class="o">+</span> <span class="n">rd</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="n">udt</span><span class="p">,</span> <span class="n">udt</span><span class="p">,</span> <span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">k</span><span class="p">))</span>

<span class="sd">&quot;&quot;&quot; REGRESSIONS LINEAIRES</span>
<span class="sd">Réalisation des N régressions linéaires au moyen d&#39;une boucle</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">c_sim</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># On stockera les célérité dans cette liste.</span>
<span class="n">ordo_sim</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># On conserve aussi les ordonnées à l&#39;origine</span>
<span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span> <span class="c1"># On parcourt les N échantillons</span>
    <span class="n">d_e</span> <span class="o">=</span> <span class="n">d_sim</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>  <span class="c1"># Sélection des distances simulées</span>
    <span class="n">dt_e</span> <span class="o">=</span> <span class="n">dt_sim</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>  <span class="c1"># Sélection des temps de vol simulés</span>
    <span class="n">par_e</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">polyfit</span><span class="p">(</span><span class="n">d_e</span><span class="p">,</span> <span class="n">dt_e</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>  <span class="c1"># Régression linéaire</span>
    <span class="n">c_e</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">par_e</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># La célérité est l&#39;inverse de la pente</span>
    <span class="n">ordo_e</span> <span class="o">=</span> <span class="n">par_e</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>  <span class="c1"># Ordonnée à l&#39;origine</span>
    <span class="n">c_sim</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c_e</span><span class="p">)</span>  <span class="c1"># Ajout de la célérité à la liste des valeurs simulées de c</span>
    <span class="n">ordo_sim</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ordo_e</span><span class="p">)</span>  <span class="c1"># Ajout de l&#39;ordonnée à l&#39;origine</span>

<span class="sd">&quot;&quot;&quot; -------------------------------------------------------</span>
<span class="sd">A VOUS DE CODER : Détermination des valeurs utiles</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">c_u</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">c_sim</span><span class="p">)</span>  <span class="c1"># Ecrire ici l&#39;instruction permettant d&#39;avoir l&#39;incertitude sur la célérité estimée à partir de c_sim</span>
<span class="n">ordo_u</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">ordo_sim</span><span class="p">)</span>  <span class="c1"># Ecrire ici l&#39;instruction permettant d&#39;avoir son incertitude à partir de ordo_sim</span>

<span class="sd">&quot;&quot;&quot; FIN DE LA PARTIE A MODIER &quot;&quot;&quot;</span>

<span class="c1"># Affichage des grandeurs.</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;c =&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">c_m</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;u(c) =&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">c_u</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ordo =&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">ordo_m</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;u(ordo) =&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">ordo_u</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="verifier-la-compatibilite-du-modele">
<h2><span class="section-number">4.3. </span>Vérifier la compatibilité du modèle<a class="headerlink" href="#verifier-la-compatibilite-du-modele" title="Permalink to this headline">#</a></h2>
<p>Lorsqu’on réalise un ajustement, on DOIT vérifier si cet ajustement est compatible avec les données expérimentales (<em>pensez qu’on peut mathématiquement n’importe quelle jeu de valeurs, même si elles ne sont pas alignées !</em>). Il existe deux méthodes :</p>
<ul class="simple">
<li><p>la vérification visuelle par un tracé graphique. <strong>Elle est obligatoire</strong>.</p></li>
<li><p>le calcul d’écart normalisée pour des tests de cohérences. Il devient nécessaire seulement si la vérification visuelle ne permet pas de conclure.
Pour s’entrainer, on va faire les deux.</p></li>
</ul>
<div class="cell tag_remove-output tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">------- TEST DE COMPATIBILITE DU MODELE -----------</span>
<span class="sd">1. Vérifier par un tracé graphique que la droite ajustée passe par les croix d&#39;incertitude</span>
<span class="sd">2. Vérifier par un tracé graphique que tous les écarts normalisés entre</span>
<span class="sd">les valeurs expérimentales et les valeurs ajustées sont inférieurs à 2</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="c1"># COMPATIBILITE A L&#39;OEIL</span>
<span class="c1"># On redonne les instructions pour le tracé des points de mesures expérimentales</span>
<span class="n">f</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">f</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;Etude de la célérité du son&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Distance cm)&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Temps de vol (ms)&quot;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">errorbar</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">xerr</span><span class="o">=</span><span class="n">ud</span><span class="p">,</span> <span class="n">yerr</span><span class="o">=</span><span class="n">udt</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Données expérimentales&quot;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">&quot;+&quot;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">)</span>

<span class="sd">&quot;&quot;&quot; --------------------------------</span>
<span class="sd">A VOUS DE CODER</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">dt_aju</span> <span class="o">=</span> <span class="n">d</span> <span class="o">/</span> <span class="n">c_m</span> <span class="o">+</span> <span class="n">ordo_m</span>  <span class="c1"># Obtenir les valeurs ajustées des temps de vol à partir de d_sim, c_m et ordo_m</span>
<span class="c1"># Ecrire ici l&#39;instruction ajoutant le tracé de la droite ajustée à partir de dt_aju et d_sim.</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">dt_aju</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;:&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Modèle ajustée&#39;</span><span class="p">)</span>

<span class="sd">&quot;&quot;&quot; FIN DE LA PARTIE A MODIFIER &quot;&quot;&quot;</span>

<span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>


<span class="c1"># ----------------------------------------------------------------------------</span>
<span class="c1"># ECARTS NORMALISES (on supposera les valeurs ajustées sans incertitude pour simplifier)</span>
<span class="c1"># Cela revient à calculer un Z-score</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">A VOUS DE CODER</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">en_s</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">dt_aju</span> <span class="o">-</span> <span class="n">dt</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">udt</span><span class="p">)</span>  <span class="c1"># Ecrire l&#39;instruction permettant de calculer les écarts normalisés entre valeurs ajustées et valeurs expérimentales</span>

<span class="nb">print</span><span class="p">(</span><span class="n">en_s</span><span class="p">)</span>  <span class="c1"># Vérifier la compatibilité du modèle.</span>


<span class="c1"># Si le temps le permet, tracer les écarts normalisés en fonction de la distance.</span>
</pre></div>
</div>
</div>
</div>
<p><strong>On observe que l’utilisation de la régression linéaire donne un modèle ajustée qui s’accorde avec beaucoup plus d’échantillons que la méthode de la moyenne (pour le meilleur et pour le pire). Seul un point reste en désaccord (le plus éloigné de la droite d’ajustement).</strong></p>
<div class="cell tag_remove-output tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">------- TEST DE COMPATIBILITE DE C -----------</span>
<span class="sd">Vérifier par un calcul d&#39;écart normalisé que la valeur estimée de la célérité</span>
<span class="sd">est compatible avec les données théoriques (attention, cel_T est à redéfinir).</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="k">def</span> <span class="nf">cel_T</span><span class="p">(</span><span class="n">T</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Fonction renvoie la célérité pour une température T&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="mf">331.5</span> <span class="o">+</span> <span class="mf">0.607</span> <span class="o">*</span> <span class="n">T</span>

<span class="sd">&quot;&quot;&quot;Estimation de c_attendue&quot;&quot;&quot;</span>
<span class="n">T_m</span> <span class="o">=</span> <span class="mi">26</span> <span class="c1"># Température</span>
<span class="n">T_u</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># Incertitude sur la température</span>
<span class="n">c_attendue</span> <span class="o">=</span> <span class="n">cel_T</span><span class="p">(</span><span class="n">T_m</span><span class="p">)</span>



<span class="sd">&quot;&quot;&quot;Estimation de l&#39;incertitude sur c_atttendue&quot;&quot;&quot;</span>
<span class="n">T_sim</span> <span class="o">=</span> <span class="n">T_m</span> <span class="o">+</span> <span class="n">rd</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="n">T_u</span><span class="p">,</span> <span class="n">T_u</span><span class="p">,</span> <span class="n">N</span><span class="p">)</span>
<span class="n">c_att_sum</span> <span class="o">=</span> <span class="n">cel_T</span><span class="p">(</span><span class="n">T_sim</span><span class="p">)</span>  <span class="c1"># l&#39;opération réalisée par cel_T étant vectorialisable, on peut appliquer la fonction à un vecteur</span>
<span class="n">c_att_u</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">c_att_sum</span><span class="p">,</span> <span class="n">ddof</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># Calcul de l&#39;incertitude sur la valeur attendue.</span>


<span class="sd">&quot;&quot;&quot;Calculer l&#39;écart normalisé.&quot;&quot;&quot;</span>
<span class="n">c_m</span> <span class="o">=</span> <span class="n">c_m</span> <span class="o">*</span> <span class="mi">10</span> <span class="c1"># Passage en m/s</span>
<span class="n">c_u</span> <span class="o">=</span> <span class="n">c_u</span> <span class="o">*</span> <span class="mi">10</span> <span class="c1"># Passage en m/s</span>

<span class="n">en</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">c_m</span> <span class="o">-</span> <span class="n">c_attendue</span><span class="p">)</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">c_u</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">c_att_u</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">en</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./notebook"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="exo_graphique.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title"><span class="section-number">3. </span>(TP) Application au tracé graphique (1h)</p>
        </div>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By C. Lacpatia<br/>
  
      &copy; Copyright 2021.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>